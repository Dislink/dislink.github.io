<!DOCTYPE html><head><link href=/favicon.ico rel="shortcut icon" type=image/x-icon><title>text2particle mcfunction | By Dislink</title><script src=/javascript/jszip.min.js type=text/javascript></script><script src=/javascript/FileSaver.js type=text/javascript></script><script src=/javascript/Math.uuid.js type=text/javascript></script><script>manifestBE={format_version:1,header:{description:"url:https://dislink.github.io/img2mcfunction",name:"",uuid:"",min_engine_version:[1,13,0],version:[0,0,1]},modules:[{description:"",type:"data",uuid:"",version:[0,0,1]}]}</script><script>function getMousePos(t,e){return[Math.round(e.clientX-t.getBoundingClientRect().left*t.width/t.getBoundingClientRect().width+1),Math.round(e.clientY-t.getBoundingClientRect().top*t.height/t.getBoundingClientRect().height+1)]}</script><style>input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{-webkit-appearance:none}input[type=number]{-moz-appearance:textfield;width:2.5rem}</style></head><body><form id=arguments><fieldset id=convert_args><legend>转换参数</legend><textarea id=text placeholder=在此处输入文本></textarea><br><input id=sizexScroll type=range value=256 min=1 max=32768 step=1> <label for=sizexScroll>画布x轴宽度</label> <input id=sizex type=number value=256 min=1 max=32768 step=1> <label for=sizex>px</label><br><input id=sizeyScroll type=range value=256 min=1 max=32768 step=1> <label for=sizeyScroll>画布y轴长度</label> <input id=sizey type=number value=256 min=1 max=32768 step=1> <label for=sizey>px</label><br><label for=font>字体描述</label> <input id=font type=text value="36px bold 黑体"><br><input id=stroke type=checkbox> <label for=stroke>空心文本</label><br><input id=sliceByLine type=checkbox> <label for=sliceByLine>行切分</label> <input id=lineHeight type=number value=38 min=1 max=32768 step=1> <label for=lineHeight>单行高度</label><br><input id=overlay type=checkbox> <label for=overlay>叠加文本</label> <input id=convert type=button value=转换 style=display:none></fieldset><fieldset id=command_args><legend>命令参数</legend><label for=particleOffset>坐标偏移量</label> <input id=particleOffset type=number value=0.1 min=0> <label for=particleOffset>blocks/px</label> <label for=particleID>粒子ID</label> <input id=particleID type=text value=minecraft:endrod oninput='value=value.replace(/[^a-zA-Z_:]/g,"")'></fieldset><br></form><canvas height=256 id=preview style=display:block title=预览 width=256></canvas><br><div id=status></div><button id=download style=display:block>下载文件</button><br><script>sizexScroll.onchange=e=>{preview.width=e.target.value,sizex.value=e.target.value},sizex.onchange=e=>{preview.width=e.target.value,sizexScroll.value=e.target.value},sizeyScroll.onchange=e=>{preview.height=e.target.value,sizey.value=e.target.value},sizey.onchange=e=>{preview.height=e.target.value,sizeyScroll.value=e.target.value},overlay.onchange=e=>{e.target.checked?convert.style="display: block;":convert.style="display: none;"},convert.onclick=()=>{flag=1,convert_args.onchange()},convert_args.onchange=()=>{var e=preview.getContext("2d");if(overlay.checked||(preview.height=preview.height),!overlay.checked||flag){if(flag=0,e.font=font.value,e.textAlign="left",e.textBaseline="top",stroke.checked)for(var t in e.strokeStyle="#ff0000",text.value.split("\n"))e.strokeText(text.value.split("\n")[t],0,t*parseInt(lineHeight.value));else for(var a in e.fillStyle="#ff0000",text.value.split("\n"))e.fillText(text.value.split("\n")[a],0,a*parseInt(lineHeight.value));filled=!0}},download.onclick=()=>{if(!filled)return alert("没有什么可下载的");var t,e=new JSZip,a=e.folder("functions"),l=(manifestBE.header.name=text.value+" "+font.value+(stroke.checked?"s":""),manifestBE.header.uuid=Math.uuid(),manifestBE.modules[0].uuid=Math.uuid(),e.file("manifest.json",JSON.stringify(manifestBE)),preview.getContext("2d").getImageData(0,0,preview.width,preview.height)),i=[[]];for(let t=0;t<preview.height;t++){t%parseInt(lineHeight.value)==0&&sliceByLine.checked&&(i[Math.floor(t/parseInt(lineHeight.value))]=[]);for(let e=0;e<preview.width;e++)0!=l.data[4*(t*preview.width+e)]&&i[sliceByLine.checked?Math.floor(t/parseInt(lineHeight.value)):0].push(`particle ${particleID.value} ~${(preview.width-e)*parseFloat(particleOffset.value)} ~${(preview.height-t)*parseFloat(particleOffset.value)} ~`)}for(t in i)for(let e=0;e<i[t].length/1e4;e++)a.file(`text${t}${e?"-"+e:""}.mcfunction`,i[t].slice(1e4*e,1e4*(e+1)).join("\n"));e.generateAsync({type:"blob"}).then(function(e){saveAs(e,`${text.value} ${font.value}${stroke.checked?"s":""}.mcpack`)})},preview.onmousemove=e=>{var t=getMousePos(e.target,e);e.target.title=`Pos: ${t[0]},`+t[1]}</script></body>